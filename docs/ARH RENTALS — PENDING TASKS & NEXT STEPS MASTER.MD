# üîê ARH RENTALS ‚Äî UPDATED PENDING TASKS & NEXT STEPS MASTER (v4)

This document defines what is DONE, what is PENDING, and what MUST be done next, in strict execution order.  
**Last Updated:** Jan 2026  
**Status:** üîí CORE STABLE + ‚úÖ OTP HARDENING APPLIED

---

## ‚úÖ COMPLETED / LOCKED (DO NOT TOUCH)

### 1) Working Rules & Process
- Rules Master finalized (how Manish works)
- Code delivery format locked (paste-box only)
- Add-only policy enforced
- Mobile + Tablet + Desktop mandatory
- Single-chat workflow accepted

---

### 2) Core UI Foundation
- Dark SaaS-style theme locked
- Header structure finalized (brand | nav | CTA)
- Hero section hierarchy refined
- Button system standardized
- Card system finalized

---

### 3) Mobile Menu (NAV) ‚Äî STATUS LOCKED (DO NOT REWORK)
Mobile hamburger now appears and opens on:
- Home ‚úÖ
- Pricing ‚úÖ
- Listings ‚úÖ (not perfect, but acceptable)
- Legal ‚úÖ (for now)

Strategy locked:
- ‚ùå No HTML restructure
- ‚ùå No new JS toggle scripts
- ‚úÖ CSS is the single source of truth
- JS only toggles: `body.nav-open` + `.menu.is-open`

---

### 4) Authentication Philosophy (LOCKED)
- OTP logic finalized (session-based)
- PIN login allowed
- OTP limits & blocks defined (reference locked)

---

### 5) Pricing Selection Bug (JS/CSS) ‚Äî ‚úÖ FIXED
- Pricing card selection now works
- Default Premium selected on load
- Card click + button click both work
- Selected visual highlight visible
- Final winning CSS override locked at END of `styles.css`
- üö´ Do not revisit unless broken again

---

### 6) Session & OTP Backend Validation ‚Äî ‚úÖ COMPLETED
Backend (Cloudflare Worker) validated against locked rules:
- 60 sec resend cooldown enforced ‚úÖ
- Max 3 OTP in 4 hours enforced ‚úÖ
- OTP validity (5 minutes) enforced ‚úÖ
- PIN restriction enforced ‚úÖ
- `/me` protected via Bearer token ‚úÖ
- Same-device session logic supported (frontend + token) ‚úÖ

---

### 7) OTP Security Hardening (Backend) ‚Äî ‚úÖ DONE (LATEST)
Implemented production-grade protections:
- ‚úÖ OTP single-use enforcement (OTP deleted after successful verify)
- ‚úÖ Wrong OTP tries limit using `tries` (max tries enforced; lock message returned)
- ‚úÖ `/me` endpoint present and working after changes

Note:
- Session expiry / revocation policy is OPTIONAL and pending.

---

## üßæ WHAT CHANGES WERE MADE (LATEST)

### A) GLOBAL MOBILE MENU SUPPORT (CSS)
Added end-of-file mobile menu CSS supporting BOTH nav markup variants:
- Variant A: `.menu > .container > .nav-inner > a`
- Variant B: `.menu > a` (direct children)

Menu visibility standardized using:
- `body.nav-open` and/or `.menu.is-open`

Dropdown positioned under header (mobile)  
Full-width stacked links enforced (mobile)

---

### B) LISTINGS PAGE ONLY ‚Äî HAMBURGER ALIGNMENT (CSS)
Added Listings-scoped mobile override (CSS-only, add-only) to:
- Reserve header space for hamburger
- Pin hamburger position consistently
- Reduce collision with brand text

Result:
‚ÄúNot perfect, but OK‚Äù ‚Üí ACCEPTED

‚ö†Ô∏è IMPORTANT  
These changes are ADD-ONLY CSS and must remain at the VERY END of `styles.css`.

---

## ‚è≥ PENDING TASKS (UPDATED PRIORITY ORDER)

### üü† PRIORITY 1 ‚Äî CORE BUSINESS PAGES (NEXT)
1) **Plans / Pricing Page UX (Copy + Flow)**
   - Clarify plan benefits
   - Clarify what ‚ÄúSelect / Selected‚Äù leads to
   - Improve placement of: ‚ÄúNo broker / no deal guarantee‚Äù messaging

2) **Legal Page Final Hookup**
   - Verify internal linking:
     - Privacy Policy
     - Terms & Conditions
     - Disclaimer
   - Check footer paths (absolute vs relative)

3) **Post Property Page Audit**
   - Field validation
   - Submission feedback
   - Mobile spacing & UX check

---

### üü° PRIORITY 2 ‚Äî SEO & DISCOVERABILITY
4) **Google Search Console Review**
   - Coverage errors
   - Sitemap verification
   - Query opportunities

5) **On-page SEO Audit**
   - H1 / H2 hierarchy
   - Meta titles & descriptions
   - Internal linking consistency

---

### üîµ PRIORITY 3 ‚Äî USER EXPERIENCE BOOSTERS
6) **WhatsApp / Call CTA Logic**
   - Context-aware buttons (header + listings)
   - Mobile-first behavior

7) **Micro UX Improvements**
   - Hover feedback consistency
   - Loading states
   - Disabled button clarity

---

### ‚ö™ PRIORITY 4 ‚Äî FUTURE (DO NOT START YET)
8) Customer Dashboard  
9) AI Listing Assistant  
10) Subscription Automation  
11) Analytics & Event Tracking  

---

## ‚ñ∂Ô∏è NEXT IMMEDIATE STEP (RECOMMENDED)
‚û§ START WITH: **TASK 1 ‚Äî Plans / Pricing Page UX (Copy + Flow)**

Reason:
- Security baseline complete
- Revenue messaging clarity improves conversions
- No backend risk

---

## üß† EXECUTION RULE (REMINDER)
- ONE task at a time
- No parallel changes
- Only add-only safe patches
- Never restructure HTML for nav/menu
- If a task requires code ‚Üí paste-box format strictly

---
END
