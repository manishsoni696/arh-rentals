ğŸ” ARH RENTALS â€” UPDATED PENDING TASKS & NEXT STEPS MASTER (v7.0)

Last Updated: Jan 2026 (Jan 9, 2026)
Note: v6.9 core content retained.
Sirf Post Property (Owner) + Dashboard + Backend Phase additions reflected.
âŒ Koi locked business / Listings UI / Pricing / Demo section change nahi hua.

ğŸŸ¡ Post Property (Owner) Page â€” Frontend

Status: IN PROGRESS (ACTIVE)

âœ… CONFIRMED WORKING â€” STATUS UPDATE (STABLE)
âœ… Access & Gating (LOCKED)

âœ… PIN Code check correctly work kar raha hai

âœ… PIN verify ke baad hi Property Details form unlock hota hai

âœ… Phone number / OTP PIN ke baad hi maanga jata hai

âœ… PIN Backend Trigger (LOCKED)

Enter key press on PIN input âœ…

â€œCheck PINâ€ button click âœ…

ğŸ“Œ Note:
Ye behavior fully verified hai.
ğŸ‘‰ Koi core auth change required nahi hai.

ğŸ“ Post Property Module â€” FILE STRUCTURE

Status: ADDED, ACTIVE & CONFIRMED (LOCKED)

post/index.html

Purpose: HTML skeleton + complete form markup

ğŸ”’ Rule: âŒ No big inline JS

assets/post-property.js

Purpose (single source): form logic, local draft, amenities render, photo validation, submit handling, auth-gate UI (PIN/OTP layer only)

ğŸ”’ Rule: âŒ core auth touch nahi karega; relies on assets/app.js

assets/styles.css (Scoped)

Purpose: Post Property UI styling only

ğŸ”’ Rule: .post-page { ... } scoped; Pricing FINAL LOCK untouched & last

âœ… NEW LOCKED DECISIONS (ADDED)
ğŸ”’ Plans Flow (LOCKED)

âœ… PIN + OTP login ke baad direct Property Details form open hoga

âœ… Plans / payment form submit ke baad show honge

âŒ Plans form se pehle nahi dikhaye jaayenge

ğŸ”’ Cloud Draft (Cross-device) â€” LOCKED RULES

Cloud draft save sirf PIN âœ… + OTP âœ… ke baad

Draft identity = logged-in mobile number

Draft scope = 1 draft per mobile (LOCKED)

Storage = Cloudflare D1 (LOCKED)

Retention = 3 days (LOCKED) â†’ auto-delete after expiry

Restore flow:

PIN âœ… â†’ OTP âœ… â†’ draft check

Draft found â†’ Restore / Discard

No draft â†’ normal form

Logout se cloud draft delete nahi hoga (only discard or auto-expiry)

ğŸ”’ Photos Backend Storage Structure (LOCKED)

Storage = Cloudflare R2

Folder-wise per listing:

photos/{listingId}/{uuid}.{ext}

UUID filenames mandatory

Original filenames reuse nahi honge

ğŸ§¾ CHANGE LOG â€” Post Property & Auth UX

Date: Jan 9, 2026
Status: ğŸŸ¡ Active (Frontend finalize pending)

âœ… COMPLETED & CONFIRMED (CLEANED)
ğŸ” Auth & Session UX (LOCKED)

Logged-in status moved to GLOBAL HEADER (masked phone)

Header dropdown becomes active immediately after login on same page

Logout only in header

Logout from dashboard redirects out instantly (protected route guard enforced)

ğŸ” Post Property Logout Reset (FIXED)

Logout on Post page:

PIN cleared

Phone cleared

OTP cleared

OTP step hidden

Form locked again

Local draft not deleted automatically

ğŸ” OTP UX Improvements (FIXED)

OTP verify: button click âœ… + Enter key âœ…

OTP resend timer resets on logout; quick login-logout me timer stuck nahi hota

ğŸŸ¢ Dashboard â€” UI

Status: âœ… COMPLETED & LOCKED (NEW)

Dashboard UI upgraded (no longer plain)

Subtitle locked:

â€œAccess and manage rental listings linked to this mobile number.â€

Quick cards + empty state finalized

No further dashboard UI changes unless explicitly unlocked

ğŸŸ¡ PENDING (FRONTEND MUST-FIX BEFORE MERGE)

âŒ Remove inline JS from post/index.html

âŒ Amenities list must reuse FINAL amenities from Listings Filters

âŒ Add <body class="post-page"> for scoped CSS

âŒ City value must be â€œHisarâ€ (Phase-1 only)

âŒ Property Type option values:

contract-stable enums (backend safe)

user-friendly labels

ğŸŸ  NEXT PHASE (BACKEND INTEGRATIONS) â€” ADDED
ğŸŸ  Phase-1: Backend Upload Link (NO compression)

Goal: Real backend upload pipeline live

R2 pre-signed upload (/api/uploads/init)

Direct upload to R2

Listing create (/api/listings/create) saves photo keys

Server-side re-validation (type/size/count)

Partial upload fail â†’ listing NOT created

âŒ No compression in Phase-1 (LOCKED)

ğŸŸ  Phase-1B: Cloud Draft Backend (D1)

Goal: Cross-device draft restore

/api/drafts/save (upsert 1 draft per mobile)

/api/drafts/latest (restore prompt)

/api/drafts/delete (discard)

Expiry cleanup (3 days) enforced

ğŸ”’ Phase-2 (Later): Photo Compression (500KB target)

LOCKED FOR LATER â€” Do not implement now

After Phase-1 stable, backend will generate compressed variant (~500KB max target)

ğŸŸ¡ PLANNED â€” AFTER FRONTEND FINALIZE
Post Property Form Fields Changes (PLANNED)

Scope: Frontend only (fields/labels/options/validations)
ğŸ“Œ Pending input required: exact field list changes

âœ… END â€” v7.0 MASTER UPDATE CONFIRMED
ğŸ” CONFIRMATIONS

âŒ No business wording changes

âŒ No core auth changes

âŒ Listings / Filters / Demo untouched

âœ… Scoped CSS safe

âœ… Modular Post Property structure active

âœ… Dashboard UI locked
