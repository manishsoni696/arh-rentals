:root{
  --bg:#0b0f14;
  --bg2:#09121b;
  --text:#f5f7fa;
  --muted:#b0b6bc;
  --line:rgba(255,255,255,.10);
  --blue:#0a74b8;
  --blue2:#1da1f2;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --radius:14px;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:
    radial-gradient(1200px 600px at 55% 15%, rgba(10,116,184,.35), transparent 60%),
    radial-gradient(900px 500px at 25% 35%, rgba(29,161,242,.18), transparent 65%),
    linear-gradient(180deg, var(--bg), var(--bg2));
  color:var(--text);
}

a{color:inherit; text-decoration:none}
a:hover{color:var(--blue2)}
.container{max-width:1100px; margin:0 auto; padding:0 18px}

/* ================= HEADER (FINAL - CONSOLIDATED) ================= */
.site-header{
  position:sticky;
  top:0;
  z-index:50;
  backdrop-filter: blur(10px);
  background: rgba(11,15,20,.76);
  border-bottom:1px solid var(--line);
}

/* Top row: brand + actions */
.navbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:14px 0;
}

.brand{display:flex; align-items:center; gap:12px}
.brand-logo{height:44px; width:auto; max-width:170px; object-fit:contain}

.brand-title{
  display:flex;
  flex-direction:column;
  line-height:1.1;
}
.brand-title strong{font-size:16px; letter-spacing:.3px}
.brand-title span{font-size:12.5px; color:var(--muted); opacity:.92}

/* Actions */
.header-actions{
  display:flex;
  align-items:center;
  gap:10px;
}

.header-cta{
  white-space:nowrap;
  padding:10px 14px;
  border-radius:12px;
  font-weight:700;
  letter-spacing:.2px;
}

/* Toggle button */
.nav-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width:44px;
  height:44px;
  border-radius:12px;
  border:1px solid var(--line);
  background: rgba(255,255,255,.04);
  color:var(--text);
  cursor:pointer;
  transition:.2s ease;
}
.nav-toggle:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.06);
}
.nav-toggle-icon{
  width:18px;
  height:2px;
  background: rgba(255,255,255,.85);
  border-radius:2px;
  position:relative;
  display:block;
}
.nav-toggle-icon::before,
.nav-toggle-icon::after{
  content:"";
  position:absolute;
  left:0;
  width:18px;
  height:2px;
  background: rgba(255,255,255,.85);
  border-radius:2px;
}
.nav-toggle-icon::before{top:-6px}
.nav-toggle-icon::after{top:6px}
.nav-toggle::before,
.nav-toggle::after{content:none !important;}

/* Menu (nav row) */
.menu{
  border-top:1px solid var(--line);
  background: rgba(11,15,20,.55);
}
.nav-inner{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px 0 16px;
  flex-wrap:wrap;
}
.menu a{
  position:relative;
  color:rgba(245,247,250,.82);
  padding:10px 12px;
  border-radius:12px;
  font-size:14px;
  font-weight:600;
  letter-spacing:.2px;
  transition: background .2s ease, transform .2s ease, color .2s ease;
}
.menu a:hover{
  background: rgba(255,255,255,.07);
  color:var(--text);
  transform: translateY(-1px);
}

/* Active state (single source of truth) */
.menu a.active{
  color:var(--text);
  background: linear-gradient(180deg, rgba(29,161,242,.22), rgba(10,116,184,.12));
  border:1px solid rgba(29,161,242,.35);
  box-shadow: 0 0 0 3px rgba(29,161,242,.10);
}

/* CTA inside menu */
.menu-cta{margin-left:auto}

/* Desktop (>=860px) */
@media (min-width:860px){
  .nav-toggle{display:none !important;}

  /* Keep nav visually integrated with header (no "bar" look) */
  .menu{
    border-top:none;
    background:transparent;
  }
  .nav-inner{
    padding:0;
    justify-content:flex-end;
    flex-wrap:wrap;
  }

  /* Desktop CTA only in header */
  .header-cta{display:inline-flex !important;}
  .menu-cta{display:none !important;}
}

/* Mobile/Tablet (<860px) */
@media (max-width:859px){
  /* Mobile CTA only inside menu */
  .header-cta{display:none !important;}
  .menu-cta{
    display:inline-flex !important;
    width:100%;
    justify-content:center;
    margin-top:8px;
  }

  /* Collapsible menu (opened by .is-open from app.js) */
  .menu{
    max-height:0;
    overflow:hidden;
    transition:max-height .25s ease;
  }
  .menu.is-open{max-height:520px;}

  /* Tappable links */
  .nav-inner{justify-content:flex-start;}
  .menu a{
    width:100%;
    justify-content:center;
    font-size:15px;
    padding:12px 14px;
    transform:none;
  }
  .menu a:hover{transform:none;}
}

/* Mobile small */
@media (max-width:600px){
  .brand-logo{height:40px; max-width:160px;}
  .brand-title strong{font-size:16px;}
  .menu a{justify-content:flex-start;}
}
/* ================= HEADER MICRO POLISH (STEP 3) ================= */

/* Mobile menu animation (smooth) */
@media (max-width:859px){
  .menu{
    opacity:0;
    transform: translateY(-6px);
    transition: max-height .25s ease, opacity .2s ease, transform .2s ease;
    will-change: max-height, opacity, transform;
  }
  .menu.is-open{
    opacity:1;
    transform: translateY(0);
  }
}

/* Hamburger -> X animation */
.nav-toggle-icon{
  transition: background .2s ease, transform .2s ease;
}
.nav-toggle-icon::before,
.nav-toggle-icon::after{
  transition: transform .2s ease, top .2s ease, opacity .2s ease;
}

/* When menu open, show X */
.nav-toggle[aria-expanded="true"] .nav-toggle-icon{
  background: transparent;
}
.nav-toggle[aria-expanded="true"] .nav-toggle-icon::before{
  top:0;
  transform: rotate(45deg);
}
.nav-toggle[aria-expanded="true"] .nav-toggle-icon::after{
  top:0;
  transform: rotate(-45deg);
}

/* Better tap feel */
.menu a:active{
  background: rgba(255,255,255,.10);
}
// === Mobile menu: lock body scroll when open (optional premium) ===
(function () {
  const toggleBtn = document.querySelector(".nav-toggle");
  const menu = document.getElementById("primary-navigation");
  if (!toggleBtn || !menu) return;

  const MOBILE_MAX = 859;
  const isMobile = () => window.matchMedia(`(max-width:${MOBILE_MAX}px)`).matches;

  const _openMenu = () => {
    menu.classList.add("is-open");
    toggleBtn.setAttribute("aria-expanded", "true");
    if (isMobile()) document.body.style.overflow = "hidden";
  };

  const _closeMenu = () => {
    menu.classList.remove("is-open");
    toggleBtn.setAttribute("aria-expanded", "false");
    document.body.style.overflow = "";
  };

  // patch existing behavior safely
  toggleBtn.addEventListener("click", () => {
    const open = menu.classList.contains("is-open");
    open ? _closeMenu() : _openMenu();
  });

  window.addEventListener("resize", () => {
    if (!isMobile()) {
      _closeMenu();
      document.body.style.overflow = "";
    }
  });
})();


