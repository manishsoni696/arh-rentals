<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Post Property • ARH Rentals</title>
  <link rel="stylesheet" href="/assets/styles.css"/>
</head>

<body>

<header class="site-header">
  <div class="container navbar">
    <a class="brand" href="/">
      <img class="brand-logo" src="/assets/arh-logo.png" alt="ARH Rentals Logo">
      <div class="brand-title">
        <strong>ARH Rentals</strong>
        <span>by Anjani Real Heights</span>
      </div>
    </a>

    <nav class="menu">
      <a href="/">Home</a>
      <a href="/listings">Listings</a>
      <a href="/pricing">Plans</a>
      <a href="/legal">Legal</a>
      <a class="btn btn-primary" href="/post">Post Property</a>
    </nav>
  </div>
</header>

<main class="container">
  <section class="hero">
    <h2 style="margin:0">Post Property (Owner)</h2>
    <p style="color:var(--muted);margin-top:8px">
       Share your property details to reach interested tenants. This is a demo form and does not submit to the backend.
    </p>
  </section>
  
  <form id="postPropertyForm" class="card" style="margin-top:16px">
    <div class="card-body" style="display:grid;gap:18px">
      <section aria-labelledby="basics-title">
        <h3 id="basics-title" style="margin:0">1) Property Basics</h3>
        <div class="grid" style="margin-top:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))">
          <label class="field">
            <span class="small">Category</span>
            <select name="category" id="categorySelect" class="input" required>
              <option value="" disabled selected>Select category</option>
              <option value="residential">Residential</option>
              <option value="commercial">Commercial</option>
            </select>
          </label>
          <label class="field">
            <span class="small">Property Type</span>
            <select name="property_type" class="input" required>
              <option value="" disabled selected>Select type</option>
              <option>Apartment</option>
              <option>Independent House</option>
              <option>Builder Floor</option>
              <option>Shop</option>
              <option>Office</option>
              <option>Showroom</option>
              <option>Warehouse</option>
            </select>
          </label>
          <label class="field">
            <span class="small">City</span>
            <input class="input" name="city" value="Hisar (Phase-1)" readonly aria-readonly="true"/>
          </label>
          <label class="field">
            <span class="small">Area / Sector</span>
            <input class="input" name="area" placeholder="e.g., Sector 9" required />
          </label>
          <label class="field">
            <span class="small">Monthly Rent (₹)</span>
            <input class="input" name="rent" type="number" min="0" step="500" placeholder="e.g., 15000" required />
          </label>
          <label class="field">
            <span class="small">Security Deposit (optional)</span>
            <input class="input" name="security_deposit" type="number" min="0" step="500" placeholder="e.g., 20000" />
          </label>
        </div>
         </section>

        <section aria-labelledby="details-title">
        <h3 id="details-title" style="margin:0">2) Details</h3>
        <div class="grid" style="margin-top:12px;display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))">
          <label class="field">
            <span class="small">Floor on Rent</span>
            <input class="input" name="floor_on_rent" placeholder="e.g., Ground / 1 / 2" required />
          </label>
          <label class="field">
            <span class="small">Size</span>
            <div style="display:flex;gap:10px">
              <input class="input" name="size" type="number" min="0" step="1" placeholder="e.g., 1200" required />
              <select class="input" name="size_unit" required>
                <option value="sq_ft">sq ft</option>
                <option value="sq_yd">sq yd</option>
                <option value="sq_m">sq m</option>
              </select>
            </div>
          </label>
          <label class="field">
            <span class="small">Furnishing (optional)</span>
            <select class="input" name="furnishing">
              <option value="">Select</option>
              <option>Unfurnished</option>
              <option>Semi-Furnished</option>
              <option>Furnished</option>
            </select>
          </label>
          <label class="field">
            <span class="small">Property Age (optional)</span>
            <select class="input" name="property_age">
              <option value="">Select</option>
              <option>0-1 years</option>
              <option>1-5 years</option>
              <option>5-10 years</option>
              <option>10+ years</option>
            </select>
          </label>
          <label class="field">
            <span class="small">Available From (optional)</span>
            <input class="input" name="available_from" type="date" />
          </label>
        </div>
           </section>

         <section aria-labelledby="amenities-title">
        <h3 id="amenities-title" style="margin:0">3) Amenities</h3>
        <p class="sub" style="margin:6px 0 10px">Amenities change based on category selection.</p>
        <div id="amenitiesContainer" class="amenities" role="group" aria-live="polite"></div>
      </section>

          <section aria-labelledby="photos-title">
        <h3 id="photos-title" style="margin:0">4) Photos</h3>
        <p class="sub" style="margin:6px 0 10px">
          Upload 1–10 photos. JPG/JPEG/PNG only. Backend will add a watermark later.
        </p>
        <input
          id="photoInput"
          class="input"
          type="file"
          name="photos"
          accept=".jpg,.jpeg,.png"
          multiple
          aria-describedby="photoHelp"
        />
        <div id="photoHelp" class="small" style="margin-top:6px">
          Har photo 1 MB se chhoti rakhein (recommended 300–600KB) — warna upload slow ho sakta hai.
        </div>
        <div id="photoErrors" class="small" style="color:#b42318;margin-top:8px"></div>
        <div id="photoPreview" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-top:10px"></div>
      </section>

           <section aria-labelledby="notes-title">
        <h3 id="notes-title" style="margin:0">5) Extra Notes</h3>
        <textarea
          class="input"
          name="extra_notes"
          rows="4"
          maxlength="300"
          placeholder="Optional notes about the property or tenant preferences (max 300 chars)."
        ></textarea>
        <div class="small" id="notesCount" style="margin-top:6px;color:var(--muted)">0 / 300</div>
      </section>
      
           <section aria-labelledby="declaration-title">
        <h3 id="declaration-title" style="margin:0">6) Owner Declaration</h3>
        <label class="amenity" style="align-items:flex-start;gap:10px">
          <input type="checkbox" id="declaration" required />
          <span>I confirm the details shared are accurate to the best of my knowledge.</span>
        </label>
      </section>

      <section aria-label="Form actions" class="actions" style="display:flex;gap:10px;flex-wrap:wrap">
        <button type="button" class="btn" id="saveDraftBtn">Save Draft</button>
        <button type="submit" class="btn btn-primary">Continue</button>
        <span id="formMsg" class="small" style="align-self:center;color:var(--muted)"></span>
      </section>
    </div>
 </form>

  <footer class="footer">
    <div class="container">
      <div>
        © <span id="year"></span> ARH Rentals •
        <a href="/legal">Legal</a> •
        <a href="/pricing">Plans</a>
      </div>

      <div class="footer-disclaimer">
        Disclaimer: ARH Rentals is an information-access platform only. We do not guarantee
        leads, tenants, responses, or deal closure. Users must independently verify all details
        before any transaction.
      </div>
    </div>
   </footer>

</main>

<script src="/assets/post-property.js"></script>
<script>
  const amenitiesMap = {
    residential: [
      { value: "parking", label: "Parking" },
      { value: "powerBackup", label: "Power Backup" },
      { value: "lift", label: "Lift" },
      { value: "security", label: "Security" },
      { value: "ac", label: "AC" }
    ],
    commercial: [
      { value: "parking", label: "Parking" },
      { value: "powerBackup", label: "Power Backup" },
      { value: "lift", label: "Lift" },
      { value: "security", label: "Security" }
    ]
  };

  const amenitiesContainer = document.getElementById("amenitiesContainer");
  const categorySelect = document.getElementById("categorySelect");
  const photoInput = document.getElementById("photoInput");
  const photoErrors = document.getElementById("photoErrors");
  const photoPreview = document.getElementById("photoPreview");
  const notesCount = document.getElementById("notesCount");
  const extraNotes = document.querySelector("textarea[name='extra_notes']");
  const form = document.getElementById("postPropertyForm");
  const formMsg = document.getElementById("formMsg");
  const saveDraftBtn = document.getElementById("saveDraftBtn");

  const renderAmenities = (category) => {
    amenitiesContainer.innerHTML = "";
    if (!category || !amenitiesMap[category]) {
      amenitiesContainer.innerHTML = "<div class=\"small\">Select a category to see amenities.</div>";
      return;
    }
  amenitiesMap[category].forEach((item) => {
      const label = document.createElement("label");
      label.className = "amenity";
      label.innerHTML = `<input type="checkbox" name="amenities" value="${item.value}"> ${item.label}`;
      amenitiesContainer.appendChild(label);
    });
  };

  const bytesToKb = (bytes) => Math.round(bytes / 1024);

  const validatePhotos = (files) => {
    const errors = [];
    const previews = [];
    const validTypes = ["image/jpeg", "image/png"];

    if (files.length === 0) {
      errors.push("Please upload at least 1 photo.");
    }
    if (files.length > 10) {
      errors.push("You can upload up to 10 photos only.");
    }

    Array.from(files).forEach((file) => {
      if (!validTypes.includes(file.type)) {
        errors.push(`${file.name}: Only JPG/JPEG/PNG allowed.`);
        return;
      }
      if (file.size > 1024 * 1024) {
        errors.push(`${file.name}: ${bytesToKb(file.size)}KB (max 1024KB).`);
        return;
      }
      previews.push(file);
    });

    return { errors, previews };
  };

  const showPhotoPreviews = (files) => {
    photoPreview.innerHTML = "";
    files.forEach((file) => {
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = document.createElement("img");
        img.src = event.target.result;
        img.alt = file.name;
        img.style.width = "100%";
        img.style.height = "100px";
        img.style.objectFit = "cover";
        img.style.borderRadius = "8px";
        photoPreview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  };

  categorySelect.addEventListener("change", (event) => {
    renderAmenities(event.target.value);
  });

  photoInput.addEventListener("change", (event) => {
    const { errors, previews } = validatePhotos(event.target.files);
    photoErrors.textContent = errors.join(" ");
    if (errors.length) {
      photoPreview.innerHTML = "";
      return;
    }
    showPhotoPreviews(previews);
  });

  extraNotes.addEventListener("input", (event) => {
    notesCount.textContent = `${event.target.value.length} / 300`;
  });

  saveDraftBtn.addEventListener("click", () => {
    formMsg.textContent = "Draft saved locally (demo).";
    setTimeout(() => {
      formMsg.textContent = "";
    }, 3000);
  });

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    const { errors } = validatePhotos(photoInput.files);
    if (errors.length) {
      photoErrors.textContent = errors.join(" ");
      return;
    }
    formMsg.textContent = "Submitted (demo)";
    setTimeout(() => {
      formMsg.textContent = "";
    }, 4000);
  });

  renderAmenities("");
</script>

</body>
</html>
